{{!-- Uses default layout "main" automatically --}}

<div class="card mb-4">
  <div class="card-body">
    <h2 class="h4 mb-3">Upload .log File</h2>
    <form id="upload-form" class="row g-3 align-items-center">
      <div class="col-sm-6">
        <input
          type="file"
          id="file"
          name="file"
          accept=".log,.txt"
          required
          class="form-control"
        />
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-primary">Upload</button>
      </div>
    </form>
    <pre id="upload-result" class="mt-3 p-3 bg-body-secondary border rounded small"></pre>
  </div>
</div>

<div class="card mb-4">
  <div class="card-body">
    <div class="d-flex align-items-center mb-3">
      <h2 class="h4 mb-0">Latest Sessions</h2>
    </div>

    <form id="sessions-form" class="row g-3 align-items-center mb-3">
      <div class="col-auto">
        <label for="sessionsPageSize" class="col-form-label">Per page:</label>
      </div>
      <div class="col-auto">
        <select id="sessionsPageSize" class="form-select">
          <option>5</option>
          <option selected>10</option>
          <option>25</option>
          <option>50</option>
        </select>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-outline-secondary btn-sm">Apply</button>
      </div>
      <div class="col-auto ms-auto">
        <button id="refresh-sessions" class="btn btn-outline-secondary btn-sm">Refresh</button>
      </div>
    </form>

    <div class="table-responsive">
      <table id="sessions-table" class="table table-striped table-bordered align-middle">
        <colgroup>
          <col class="id" />
          <col class="date" />
          <col class="start" />
          <col class="stop" />
          <col class="duration" />
          <col class="filename" />
        </colgroup>
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Date</th>
            <th>Start</th>
            <th>Stop</th>
            <th>Duration (min)</th>
            <th>Filename</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="6" class="text-center">Loadingâ€¦</td></tr>
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between align-items-center">
      <div class="small text-muted" id="sessions-meta"></div>
      <nav aria-label="Sessions pagination">
        <ul class="pagination mb-0" id="sessions-pager"></ul>
      </nav>
    </div>
  </div>
</div>

<div class="card mb-5">
  <div class="card-body">
    <div class="d-flex align-items-center mb-3">
      <h2 class="h4 mb-0">Check-ins</h2>
    </div>

    <form id="filter-form" class="row g-3 align-items-center mb-3">
      <div class="col-auto">
        <label for="callsign" class="col-form-label">Filter by callsign:</label>
      </div>
      <div class="col-auto">
        <input type="text" id="callsign" placeholder="e.g., KD5YVG" class="form-control" />
      </div>
      <div class="col-auto">
        <label for="pageSize" class="col-form-label">Per page:</label>
      </div>
      <div class="col-auto">
        <select id="pageSize" class="form-select">
          <option>10</option>
          <option selected>25</option>
          <option>50</option>
          <option>100</option>
        </select>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-secondary">Apply</button>
      </div>
    </form>

    <div class="table-responsive">
      <table id="checkins-table" class="table table-striped table-bordered align-middle">
        <colgroup>
          <col class="session" />
          <col class="rownum" />
          <col class="callsign" />
          <col class="comment" />
          <col class="tags" />
        </colgroup>
        <thead class="table-dark">
          <tr>
            <th>Session</th>
            <th>#</th>
            <th>Callsign</th>
            <th>Comment</th>
            <th>Tags</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between align-items-center">
      <div class="small text-muted" id="checkins-meta"></div>
      <nav aria-label="Checkins pagination">
        <ul class="pagination mb-0" id="checkins-pager"></ul>
      </nav>
    </div>
  </div>
</div>

{{!-- Page-specific scripts --}}
{{#section "scripts"}}
  <script src="/app.js" defer></script>
{{/section}}